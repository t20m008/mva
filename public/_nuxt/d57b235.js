(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{850:function(t,e,o){var content=o(896);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(22).default)("0b20948b",content,!0,{sourceMap:!1})},895:function(t,e,o){"use strict";o(850)},896:function(t,e,o){var n=o(21)(!1);n.push([t.i,".w[data-v-1e3eb8a3]{width:100px;height:100px;overflow:auto}td[data-v-1e3eb8a3]{border-right:1px solid grey;border-bottom:1px solid grey}",""]),t.exports=n},926:function(t,e,o){"use strict";o.r(e);var n=o(9),r=(o(7),o(12),o(190),o(72),o(53),o(847)),l=o.n(r),c=o(105),d={components:{VueJsonToCsv:l.a},data:function(){return{logUsers:[],selected:null,selectedBoolean:!0,history:[],sCSV:"",jsonData:[],csvTitle:"",csvData:[],labels:{locale:{title:"locale"},timestamp:{title:"timestamp"},id:{title:"id"},action:{title:"action"},href:{title:"href"},tex:{title:"tex"},displayName:{title:"displayName"},email:{title:"email"},uid:{title:"uid"}},CollectionAll:c.a}},watch:{selected:function(t,e){null!=t&&(this.selectedBoolean=!1,this.getHistory(t)),e!==t&&(this.history=[])}},created:function(){this.$store.getters.isLoggedIn||this.$router.push("/login"),"t20m008@mail.ryukoku.ac.jp"!==this.$fire.auth.currentUser.email&&(this.$router.push("/"),alert("アクセス権限がありません"))},mounted:function(){var t=this;function e(){return(e=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadLogUsers();case 2:t.logUsers=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},methods:{loadMessage:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.$store.state.chat.chatId,n=[],e.next=4,t.chatCollection.doc(o).collection("messages").orderBy("timestamp").onSnapshot((function(t){t.docChanges().forEach((function(t,e){if("removed"!==t.type){var o=t.doc.data();o.id=t.doc.id,n.push(o)}else n.splice(t.oldIndex,1)}))}));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},deleteMessage:function(t){this.$fire.firestore.collection("chat").doc(this.chatId).collection("messages").doc(t).delete().then((function(){})).catch((function(t){console.log(t)}))},download:function(){var t=this;this.csvTitle="allg_"+Date.now(),this.history.forEach((function(data){t.csvData.push({locale:data.locale,timestamp:data.timestamp,id:data.id,action:data.action,href:data.href,tex:data.tex,uid:data.uid,email:data.email,displayName:data.displayName})}))},getUniqueStr:function(t){var strong=1e3;return t&&(strong=t),(new Date).getTime().toString(16)+Math.floor(strong*Math.random()).toString(16)},loadLogUsers:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.next=3,t.$fire.firestore.collection(t.CollectionAll).get().then((function(t){t.forEach((function(t){o.push({text:t.data().displayName,value:t.data().uid})}))}));case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})))()},getHistory:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("a"),o=[],t.next=4,e.$fire.firestore.collection(e.CollectionAll).get().then((function(t){t.forEach((function(t){o.push({text:t.data().displayName,value:t.data().uid}),e.history.push(t.data())}))})).catch((function(t){console.log(t)}));case 4:return t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)})))()},createCSV:function(t){var e=this;this.sCSV="locale,timestamp,id,action,tex,displayName,email,uid,href\n";var o=[];t.forEach((function(data,i){o.push(data)})),this.jsonData=o,t.forEach((function(t,i){console.table([t.locale,t.timestamp,t.id,t.action,t.tex,t.displayName,t.email,t.uid,t.href]),e.sCSV+=t.locale+","+t.timestamp+","+t.id+","+t.action+',"'+t.tex+'",'+t.displayName+'",'+t.email+'",'+t.uid+'",'+t.href+"\n"}))},createJSON:function(t){var e=[];t.forEach((function(data,i){e.push(data)})),this.jsonData=e}}},h=d,f=(o(895),o(94)),v=o(115),m=o.n(v),_=o(830),x=o(240),y=o(753),w=o(762),C=o(218),k=o(754),V=o(919),N=o(918),component=Object(f.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{staticClass:"chat-main-container"},[o("div",{attrs:{id:"app"}},[o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"d-flex",attrs:{cols:"8",sm:"6"}},[o("v-select",{attrs:{items:t.logUsers,outlined:"",label:"ユーザーを選択"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),t._v(" "),o("v-col",{staticClass:"d-flex",attrs:{cols:"4",sm:"6"}},[o("VueJsonToCsv",{attrs:{"json-data":t.csvData,"csv-title":t.csvTitle,labels:t.labels}},[o("v-btn",{attrs:{disabled:t.selectedBoolean,color:"green"},on:{click:t.download}},[o("v-icon",[t._v("mdi-download")])],1)],1)],1)],1)],1),t._v(" "),o("v-simple-table",{directives:[{name:"katex",rawName:"v-katex:auto",arg:"auto"}],staticStyle:{border:"1px solid gray"},attrs:{dense:"",elevation:"10","fixed-header":"",height:"600px"},scopedSlots:t._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[t._v("locale")]),t._v(" "),o("th",{staticClass:"text-left"},[t._v("id")]),t._v(" "),o("th",{staticClass:"text-left"},[t._v("action")]),t._v(" "),o("th",{staticClass:"text-left"},[t._v("tex")]),t._v(" "),o("th",{staticClass:"text-left"},[t._v("displayName")]),t._v(" "),o("th",{staticClass:"text-left"},[t._v("email")]),t._v(" "),o("th",{staticClass:"text-left"},[t._v("uid")]),t._v(" "),o("th",{staticClass:"text-left"},[t._v("href")])])]),t._v(" "),o("tbody",t._l(t.history,(function(e){return o("tr",{key:e.timestamp},[o("td",[t._v(t._s(e.locale))]),t._v(" "),o("td",[t._v(t._s(e.id))]),t._v(" "),o("td",[t._v(t._s(e.action))]),t._v(" "),o("td",[t._v("$"+t._s(e.tex)+"$")]),t._v(" "),o("td",[t._v(t._s(e.displayName))]),t._v(" "),o("td",[t._v(t._s(e.email))]),t._v(" "),o("td",[t._v(t._s(e.uid))]),t._v(" "),o("td",[t._v(t._s(e.href))])])})),0)]},proxy:!0}])}),t._v(" "),o("v-alert",{staticClass:"mt-3",attrs:{border:"left","colored-border":"",color:"teal accent-4",elevation:"10"}},[t._v(t._s(t.selected)+" ")])],1)}),[],!1,null,"1e3eb8a3",null);e.default=component.exports;m()(component,{VAlert:_.a,VBtn:x.a,VCol:y.a,VContainer:w.a,VIcon:C.a,VRow:k.a,VSelect:V.a,VSimpleTable:N.a})}}]);